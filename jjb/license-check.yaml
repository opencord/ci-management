---
# omec license check job

- project:
    name: omec-license-check

    project-name: '{name}'

    jobs:
      - 'license-check'

- job-template:
    id: 'license-check'
    name: 'omec-license'

    description: |
                  <!-- Managed by Jenkins Job Builder -->
                  Copyright (c) 2018 Open Networking Foundation (ONF)

    properties:
      - cord-infra-properties:
          build-days-to-keep: '{build-days-to-keep}'
          artifact-num-to-keep: '{artifact-num-to-keep}'

    wrappers:
      - lf-infra-wrappers:
          build-timeout: '{build-timeout}'
          jenkins-ssh-credential: '{jenkins-ssh-credential}'

    parameters:
      - string:
         name: TestNodeName
         default: 'ubuntu16.04-basebuild-1c-1g'
         description: 'Jenkins node name of TestVM Node'

      - string:
         name: branch
         default: 'master'
         description: 'Gerrit Branch'

      - string:
         name: repos
         default: 'ngic-rtc,freediameter,c3po,openmme,oss-util,deployment,il_trafficgen'
         description: 'list of the repos to check'

      - string:
         name: prefix
         default: 'cord-m'
         description: 'The prefix to give to the projects in the BlackDuck dashboard'

      - string:
         name: notificationEmail
         default: 'omecproject-support@opennetworking.org'
         description: ''

    concurrent: true

    pipeline-scm:
      script-path: 'Jenkinsfile-mcord-license-check'
      scm:
        - git:
           url: '{gerrit-server-url}/cord-tester'
           branches:
             - '{branch}'

    triggers:
       - timed: |
                 TZ=America/Los_Angeles
                 H 3 * * *

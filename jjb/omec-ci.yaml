---
# omec-ci jobs
# Uses github pull request builder to trigger and Jenkinsfiles from this repo
#  https://github.com/omec-project/omec-project-ci

# generic OMEC test-case jobs, shared by other projects and triggered within pipelines
- project:
    name: omec
    build-node: 'intel-102'

    github_pr_auth_id: '64fe2b1a-b33a-4f13-8442-ad8360434003'
    github_pr_org_list:
      - 'omec-project'

    jobs:
      - 'omec-tc1'
      - 'omec-tc2'
      - 'omec-deploy-staging'
      - 'omec-postmerge':
          project: '{name}'
          build-node: 'omec-qa'
          c3po-branch-name: 'multiUpfs'
          ngic-branch-name: 'central-cp-multi-upfs'
          openmme-branch-name: 'paging'
          pipeline-file: 'omec-postmerge.groovy'

# for ngic-rtc
- project:
    name: ngic-rtc
    project: '{name}'

    build-node: 'intel-102'

    github-organization: 'omec-project'

    github_pr_auth_id: '64fe2b1a-b33a-4f13-8442-ad8360434003'
    github_pr_org_list:
      - 'omec-project'

    jobs:
      - 'omec-combined':
          pipeline-file: 'Jenkinsfile-omec-combined.groovy'
          mme-repo: 'openmme'
      - 'omec-install':
          sub-project: '{name}'
          branch: 'master'
          pipeline-file: 'Jenkinsfile-omec-install-ngic-rtc-vnf.groovy'
      - 'omec-fossa':
          pipeline-file: 'omec-fossa-scan.groovy'
          build-node: 'omec-qa'
      - 'omec-reuse':
          pipeline-file: 'omec-reuse-scan.groovy'
          build-node: 'omec-qa'
      - 'docker-publish-github':
          build-timeout: 30
          docker-repo: 'omecproject'
          build-node: 'ubuntu16.04-basebuild-4c-8g'

# for c3po
- project:
    name: c3po
    project: '{name}'

    build-node: 'intel-102'

    github-organization: 'omec-project'

    github_pr_auth_id: '64fe2b1a-b33a-4f13-8442-ad8360434003'
    github_pr_org_list:
      - 'omec-project'

    jobs:
      - 'omec-combined':
          pipeline-file: 'Jenkinsfile-omec-combined.groovy'
          mme-repo: 'openmme'
      - 'omec-install':
          sub-project: 'c3po-sgx'
          branch: 'master'
          pipeline-file: 'Jenkinsfile-omec-install-c3po-sgx-vnf.groovy'
      - 'omec-install':
          sub-project: 'c3po-hss'
          branch: 'master'
          pipeline-file: 'Jenkinsfile-omec-install-c3po-hss-vnf.groovy'
      - 'omec-fossa':
          pipeline-file: 'omec-fossa-scan.groovy'
          build-node: 'omec-qa'
      - 'omec-reuse':
          pipeline-file: 'omec-reuse-scan.groovy'
          build-node: 'omec-qa'
      - 'docker-publish-github':
          build-timeout: 30
          docker-repo: 'omecproject'
          build-node: 'ubuntu16.04-basebuild-1c-2g'

# for openmme
- project:
    name: openmme
    project: '{name}'

    build-node: 'intel-102'

    github-organization: 'omec-project'

    github_pr_auth_id: '64fe2b1a-b33a-4f13-8442-ad8360434003'
    github_pr_org_list:
      - 'omec-project'

    jobs:
      - 'omec-combined':
          pipeline-file: 'Jenkinsfile-omec-combined.groovy'
          mme-repo: 'openmme'
      - 'omec-install':
          sub-project: '{name}'
          branch: 'paging'
          pipeline-file: 'Jenkinsfile-omec-install-openmme-vnf.groovy'
      - 'omec-fossa':
          pipeline-file: 'omec-fossa-scan.groovy'
          build-node: 'omec-qa'
      - 'omec-reuse':
          pipeline-file: 'omec-reuse-scan.groovy'
          build-node: 'omec-qa'
      - 'docker-publish-github':
          build-timeout: 30
          docker-repo: 'omecproject'
          build-node: 'ubuntu16.04-basebuild-1c-2g'

# for nucleus
- project:
    name: Nucleus
    project: '{name}'

    build-node: 'intel-102'

    github-organization: 'omec-project'

    github_pr_auth_id: '64fe2b1a-b33a-4f13-8442-ad8360434003'
    github_pr_org_list:
      - 'omec-project'

    jobs:
      - 'omec-combined':
          pipeline-file: 'Jenkinsfile-omec-combined.groovy'
          mme-repo: 'Nucleus'
      - 'omec-install':
          sub-project: '{name}'
          branch: 'master'
          pipeline-file: 'Jenkinsfile-omec-install-Nucleus-vnf.groovy'
      - 'omec-fossa':
          pipeline-file: 'omec-fossa-scan.groovy'
          build-node: 'omec-qa'
      - 'omec-reuse':
          pipeline-file: 'omec-reuse-scan.groovy'
          build-node: 'omec-qa'

# for freediameter
- project:
    name: freediameter
    project: '{name}'

    build-node: 'intel-102'

    github-organization: 'omec-project'

    github_pr_auth_id: '64fe2b1a-b33a-4f13-8442-ad8360434003'
    github_pr_org_list:
      - 'omec-project'

    jobs:
      - 'omec-fossa':
          pipeline-file: 'omec-fossa-scan.groovy'
          build-node: 'omec-qa'
      - 'omec-reuse':
          pipeline-file: 'omec-reuse-scan.groovy'
          build-node: 'omec-qa'

# for ignite
- project:
    name: ignite
    project: '{name}'

    build-node: 'intel-102'

    github-organization: 'omec-project'

    github_pr_auth_id: '64fe2b1a-b33a-4f13-8442-ad8360434003'
    github_pr_org_list:
      - 'omec-project'

    jobs:
      - 'omec-fossa':
          pipeline-file: 'omec-fossa-scan.groovy'
          build-node: 'omec-qa'
      - 'omec-reuse':
          pipeline-file: 'omec-reuse-scan.groovy'
          build-node: 'omec-qa'

# for upf-epc
- project:
    name: upf-epc
    project: '{name}'

    github-organization: 'omec-project'

    github_pr_auth_id: '64fe2b1a-b33a-4f13-8442-ad8360434003'
    github_pr_org_list:
      - 'omec-project'

    jobs:
      - 'omec-fossa':
          pipeline-file: 'omec-fossa-scan.groovy'
          build-node: 'omec-qa'
      - 'omec-reuse':
          pipeline-file: 'omec-reuse-scan.groovy'
          build-node: 'omec-qa'
      - 'docker-publish-github':
          build-timeout: 30
          docker-repo: 'omecproject'
          build-node: 'ubuntu16.04-basebuild-2c-4g'
